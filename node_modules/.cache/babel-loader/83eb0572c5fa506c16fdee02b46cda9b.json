{"remainingRequest":"/Users/wuxingliu/ylz_work/2020/statistics/node_modules/thread-loader/dist/cjs.js!/Users/wuxingliu/ylz_work/2020/statistics/node_modules/babel-loader/lib/index.js!/Users/wuxingliu/ylz_work/2020/statistics/node_modules/eslint-loader/index.js??ref--13-0!/Users/wuxingliu/ylz_work/2020/statistics/src/api/request.js","dependencies":[{"path":"/Users/wuxingliu/ylz_work/2020/statistics/src/api/request.js","mtime":1598097623000},{"path":"/Users/wuxingliu/ylz_work/2020/statistics/node_modules/cache-loader/dist/cjs.js","mtime":1598022527352},{"path":"/Users/wuxingliu/ylz_work/2020/statistics/node_modules/thread-loader/dist/cjs.js","mtime":1598022527348},{"path":"/Users/wuxingliu/ylz_work/2020/statistics/node_modules/babel-loader/lib/index.js","mtime":1597741073441},{"path":"/Users/wuxingliu/ylz_work/2020/statistics/node_modules/eslint-loader/index.js","mtime":1598022528243}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gIi9Vc2Vycy93dXhpbmdsaXUveWx6X3dvcmsvMjAyMC9zdGF0aXN0aWNzL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL1VzZXJzL3d1eGluZ2xpdS95bHpfd29yay8yMDIwL3N0YXRpc3RpY3Mvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnOwpleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiByZXF1ZXN0KF94KSB7CiAgcmV0dXJuIF9yZXF1ZXN0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0KCmZ1bmN0aW9uIF9yZXF1ZXN0KCkgewogIF9yZXF1ZXN0ID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKHVybCkgewogICAgdmFyIG1ldGhvZCwKICAgICAgICBkYXRhLAogICAgICAgIG9wdGlvbnMsCiAgICAgICAgZGVmYXVsdE9wdGlvbnMsCiAgICAgICAgbmV3T3B0aW9ucywKICAgICAgICBfYXJncyA9IGFyZ3VtZW50czsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgbWV0aG9kID0gX2FyZ3MubGVuZ3RoID4gMSAmJiBfYXJnc1sxXSAhPT0gdW5kZWZpbmVkID8gX2FyZ3NbMV0gOiAnZ2V0JzsKICAgICAgICAgICAgZGF0YSA9IF9hcmdzLmxlbmd0aCA+IDIgJiYgX2FyZ3NbMl0gIT09IHVuZGVmaW5lZCA/IF9hcmdzWzJdIDogdW5kZWZpbmVkOwogICAgICAgICAgICBvcHRpb25zID0gX2FyZ3MubGVuZ3RoID4gMyAmJiBfYXJnc1szXSAhPT0gdW5kZWZpbmVkID8gX2FyZ3NbM10gOiB7fTsKICAgICAgICAgICAgZGVmYXVsdE9wdGlvbnMgPSB7CiAgICAgICAgICAgICAgdXJsOiB1cmwsCiAgICAgICAgICAgICAgbWV0aG9kOiBtZXRob2QsCiAgICAgICAgICAgICAgZGF0YTogZGF0YQogICAgICAgICAgICB9OwogICAgICAgICAgICBuZXdPcHRpb25zID0gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBkZWZhdWx0T3B0aW9ucyksIG9wdGlvbnMpOwoKICAgICAgICAgICAgaWYgKG5ld09wdGlvbnMubWV0aG9kLnRvVXBwZXJDYXNlID09PSAnUE9TVCcgfHwgbmV3T3B0aW9ucy5tZXRob2QudG9VcHBlckNhc2UoKSA9PT0gJ1BVVCcpIHsKICAgICAgICAgICAgICBpZiAoIShuZXdPcHRpb25zLmJvZHkgaW5zdGFuY2VvZiBGb3JtRGF0YSkpIHsKICAgICAgICAgICAgICAgIG5ld09wdGlvbnMuaGVhZGVyID0gX29iamVjdFNwcmVhZCh7CiAgICAgICAgICAgICAgICAgIEFjY2VwdDogJ2FwcGxpY2F0aW9uL2pzb24nLAogICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9dXRmLTgnCiAgICAgICAgICAgICAgICB9LCBuZXdPcHRpb25zLmhlYWRlcik7CiAgICAgICAgICAgICAgICBuZXdPcHRpb25zLmJvZHkgPSBKU09OLnN0cmluZ2lmeShuZXdPcHRpb25zLmJvZHkpOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAvLyBuZXdPcHRpb25zLmJvZHkgaXMgRm9ybURhdGEKICAgICAgICAgICAgICAgIG5ld09wdGlvbnMuaGVhZGVyID0gX29iamVjdFNwcmVhZCh7CiAgICAgICAgICAgICAgICAgIEFjY2VwdDogJ2FwcGxpY2F0aW9uL2pzb24nCiAgICAgICAgICAgICAgICB9LCBuZXdPcHRpb25zLmhlYWRlcik7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgICAgICAgLy8g5Y+R6LW36K+35rGC77yM6L+U5Zue57uT5p6c77yM5o2V6I636ZSZ6K+vCiAgICAgICAgICAgICAgYXhpb3MobmV3T3B0aW9ucykudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgICByZXNvbHZlKHJlcyk7CiAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgICAgICAgICAgcmVqZWN0KGVycik7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZSk7CiAgfSkpOwogIHJldHVybiBfcmVxdWVzdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9"},{"version":3,"sources":["/Users/wuxingliu/ylz_work/2020/statistics/src/api/request.js"],"names":["axios","request","url","method","data","undefined","options","defaultOptions","newOptions","toUpperCase","body","FormData","header","Accept","JSON","stringify","Promise","resolve","reject","then","res","catch","err"],"mappings":";;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,wBAA8BC,OAA9B;AAAA;AAAA;;;qEAAe,iBAAuBC,GAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA4BC,YAAAA,MAA5B,2DAAqC,KAArC;AAA4CC,YAAAA,IAA5C,2DAAmDC,SAAnD;AAA8DC,YAAAA,OAA9D,2DAAwE,EAAxE;AACPC,YAAAA,cADO,GACU;AACrBL,cAAAA,GAAG,EAAHA,GADqB;AAErBC,cAAAA,MAAM,EAANA,MAFqB;AAGrBC,cAAAA,IAAI,EAAJA;AAHqB,aADV;AAMPI,YAAAA,UANO,mCAMWD,cANX,GAM8BD,OAN9B;;AAOb,gBAAIE,UAAU,CAACL,MAAX,CAAkBM,WAAlB,KAAkC,MAAlC,IAA4CD,UAAU,CAACL,MAAX,CAAkBM,WAAlB,OAAoC,KAApF,EAA2F;AACzF,kBAAI,EAAED,UAAU,CAACE,IAAX,YAA2BC,QAA7B,CAAJ,EAA4C;AAC1CH,gBAAAA,UAAU,CAACI,MAAX;AACEC,kBAAAA,MAAM,EAAE,kBADV;AAEE,kCAAgB;AAFlB,mBAGKL,UAAU,CAACI,MAHhB;AAKAJ,gBAAAA,UAAU,CAACE,IAAX,GAAkBI,IAAI,CAACC,SAAL,CAAeP,UAAU,CAACE,IAA1B,CAAlB;AACD,eAPD,MAOO;AACL;AACAF,gBAAAA,UAAU,CAACI,MAAX;AACEC,kBAAAA,MAAM,EAAE;AADV,mBAEKL,UAAU,CAACI,MAFhB;AAID;AACF;;AAtBY,6CAwBN,IAAII,OAAJ,CAAY,UAASC,OAAT,EAAkBC,MAAlB,EAA0B;AAC3C;AACAlB,cAAAA,KAAK,CAACQ,UAAD,CAAL,CACGW,IADH,CACQ,UAACC,GAAD,EAAS;AACbH,gBAAAA,OAAO,CAACG,GAAD,CAAP;AACD,eAHH,EAIGC,KAJH,CAIS,UAACC,GAAD,EAAS;AACdJ,gBAAAA,MAAM,CAACI,GAAD,CAAN;AACD,eANH;AAOD,aATM,CAxBM;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G","sourcesContent":["import axios from 'axios'\n\nexport default async function request(url, method = 'get', data = undefined, options = {}) {\n  const defaultOptions = {\n    url,\n    method,\n    data,\n  }\n  const newOptions = { ...defaultOptions, ...options }\n  if (newOptions.method.toUpperCase === 'POST' || newOptions.method.toUpperCase() === 'PUT') {\n    if (!(newOptions.body instanceof FormData)) {\n      newOptions.header = {\n        Accept: 'application/json',\n        'Content-Type': 'application/json; charset=utf-8',\n        ...newOptions.header,\n      }\n      newOptions.body = JSON.stringify(newOptions.body)\n    } else {\n      // newOptions.body is FormData\n      newOptions.header = {\n        Accept: 'application/json',\n        ...newOptions.header,\n      }\n    }\n  }\n\n  return new Promise(function(resolve, reject) {\n    // 发起请求，返回结果，捕获错误\n    axios(newOptions)\n      .then((res) => {\n        resolve(res)\n      })\n      .catch((err) => {\n        reject(err)\n      })\n  })\n}\n"]}]}